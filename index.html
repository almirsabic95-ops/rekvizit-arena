<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rekvizit Arena</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body { background: #020617; color: #f8fafc; overflow: hidden; height: 100vh; font-family: sans-serif; }
        .hidden { display: none; }
        .timer-red { color: #f87171; animation: blink 0.5s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.4; } }
    </style>
</head>
<body class="flex flex-col">

    <div id="screen-login" class="fixed inset-0 z-[100] flex items-center justify-center bg-slate-950 p-4">
        <div class="bg-slate-900 p-8 rounded-3xl border border-slate-800 w-full max-w-sm space-y-4 shadow-2xl">
            <h1 class="text-4xl font-black text-blue-500 italic text-center uppercase tracking-tighter">Arena 2026</h1>
            <input type="text" id="u" placeholder="Nadimak" class="w-full p-4 rounded-xl bg-slate-800 outline-none text-white border border-transparent focus:border-blue-500">
            <input type="password" id="p" placeholder="Lozinka" class="w-full p-4 rounded-xl bg-slate-800 outline-none text-white border border-transparent focus:border-blue-500">
            
            <div id="wrapper-secret" class="hidden">
                <input type="text" id="s" placeholder="Tajna Å¡ifra (samo prvi put)" class="w-full p-4 rounded-xl bg-blue-900/20 border border-blue-500 outline-none text-white font-bold">
            </div>

            <button onclick="prijavi()" class="w-full p-4 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl transition-all uppercase tracking-widest shadow-lg shadow-blue-500/20">
                Pristupi
            </button>
        </div>
    </div>

    <div id="screen-menu" class="hidden flex-1 overflow-y-auto p-6 space-y-6">
        <div class="flex justify-between items-center">
            <h2 class="text-2xl font-bold italic">Bok, <span id="my-name" class="text-blue-400"></span>!</h2>
            <button id="btn-cisco" onclick="start('cisco')" class="hidden px-4 py-2 bg-blue-600 rounded-lg text-xs font-bold animate-pulse uppercase">Cisco Academy</button>
        </div>

        <div class="grid grid-cols-2 gap-3">
            <button onclick="start('mix')" class="p-6 bg-slate-900 border border-slate-800 rounded-2xl hover:border-blue-500 text-xl font-bold">ğŸŒªï¸ MIX</button>
            <button onclick="start('sport')" class="p-6 bg-slate-900 border border-slate-800 rounded-2xl hover:border-blue-500">âš½ Sport</button>
            <button onclick="start('znanost')" class="p-6 bg-slate-900 border border-slate-800 rounded-2xl hover:border-blue-500">ğŸ§ª Znanost</button>
            <button onclick="start('kultura')" class="p-6 bg-slate-900 border border-slate-800 rounded-2xl hover:border-blue-500">ğŸ¨ Kultura</button>
            <button onclick="start('povijest')" class="p-6 bg-slate-900 border border-slate-800 rounded-2xl hover:border-blue-500">ğŸ“œ Povijest</button>
            <button onclick="start('zemljopis')" class="p-6 bg-slate-900 border border-slate-800 rounded-2xl hover:border-blue-500">ğŸŒ Zemljopis</button>
            <button onclick="start('glazba')" class="p-6 bg-slate-900 border border-slate-800 rounded-2xl hover:border-blue-500">ğŸµ Muzika</button>
            <button onclick="start('film')" class="p-6 bg-slate-900 border border-slate-800 rounded-2xl hover:border-blue-500">ğŸ¬ Film</button>
        </div>
    </div>

    <div id="screen-arena" class="hidden flex flex-col h-full bg-slate-950">
        <div class="p-4 bg-slate-900 flex justify-between items-center border-b border-slate-800">
            <button onclick="location.reload()" class="text-slate-500 font-bold">â† IZLAZ</button>
            <div id="timer" class="text-3xl font-black font-mono tracking-tighter">30</div>
            <div id="soba-naslov" class="uppercase font-bold text-blue-500 text-xs tracking-widest"></div>
        </div>
        
        <div id="q-box" class="p-8 text-center text-xl md:text-2xl font-medium min-h-[160px] flex items-center justify-center italic bg-slate-900/20 text-blue-100">
            ÄŒekam pitanje...
        </div>

        <div id="chat" class="flex-1 overflow-y-auto p-4 space-y-2 text-sm bg-slate-950"></div>

        <div class="p-4 bg-slate-900 border-t border-slate-800">
            <div class="flex gap-2 max-w-3xl mx-auto">
                <input type="text" id="ans" class="flex-1 p-4 rounded-xl bg-slate-800 border border-transparent focus:border-blue-500 outline-none text-white" placeholder="Tvoj odgovor...">
                <button onclick="posalji()" class="px-8 bg-blue-600 rounded-xl font-bold uppercase hover:bg-blue-500 transition-all">PoÅ¡alji</button>
            </div>
        </div>
    </div>

    <script>
        const socket = io();
        function prijavi() {
            socket.emit('prijava', { 
                ime: document.getElementById('u').value, 
                lozinka: document.getElementById('p').value, 
                tajnaSifra: document.getElementById('s').value 
            });
        }
        socket.on('err', m => alert(m));
        socket.on('otvori_tajno_polje', () => {
            document.getElementById('wrapper-secret').classList.remove('hidden');
            alert("Novi ste? Unesite tajnu Å¡ifru za registraciju.");
        });
        socket.on('uspjesna_prijava', d => {
            document.getElementById('screen-login').classList.add('hidden');
            document.getElementById('screen-menu').classList.remove('hidden');
            document.getElementById('my-name').innerText = d.ime;
            if(d.jeAdmin) document.getElementById('btn-cisco').classList.remove('hidden');
        });
        function start(s) {
            document.getElementById('screen-menu').classList.add('hidden');
            document.getElementById('screen-arena').classList.remove('hidden');
            document.getElementById('soba-naslov').innerText = s;
            socket.emit('join_room', s);
        }
        socket.on('novo_pitanje', d => {
            document.getElementById('q-box').innerText = d.pitanje;
            document.getElementById('timer').innerText = d.vrijeme;
            document.getElementById('timer').classList.remove('timer-red');
            document.getElementById('chat').innerHTML = '';
        });
        socket.on('tick', v => {
            const t = document.getElementById('timer');
            t.innerText = v;
            if(v <= 10) t.classList.add('timer-red');
        });
        function posalji() {
            const i = document.getElementById('ans');
            if(i.value) socket.emit('slanje_odgovora', { tekst: i.value });
            i.value = '';
        }
        socket.on('rezultat', d => {
            const c = document.getElementById('chat');
            const div = document.createElement('div');
            div.className = `p-3 rounded-xl text-center font-bold mb-2 ${d.tip === 'tocno' ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'bg-red-500/10 text-red-400 border border-red-500/20'}`;
            div.innerText = d.poruka;
            c.appendChild(div);
            c.scrollTop = c.scrollHeight;
        });
        socket.on('obavijest', m => {
            const c = document.getElementById('chat');
            const div = document.createElement('div');
            div.className = "text-slate-500 text-center text-xs italic py-1";
            div.innerText = m;
            c.appendChild(div);
            c.scrollTop = c.scrollHeight;
        });
    </script>
</body>
</html>